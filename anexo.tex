\label{chap:apendice}

\section{Recuperaci\'on de Informaci\'on mediante Superpixels}
\label{sec:superpixels}

La captura o recuperaci\'on de la informaci\'on del vecindario de los p\'ixeles del esqueleto se realiza utilizando la misma imagen a partir de la cual se obtiene el esqueleto, en conjunto con el grafo derivado del esqueleto. El procedimiento consta de los siguientes pasos:
%A su vez, con esta herramienta tambi\'en es posible construir un grafo de la red de filamentos, sin embargo, el resultado no es de alta calidad.


% explicar que el hecho de G completo mediante lo q la arista es al problema de identificación de filamentos
%presento el extractor aproximado de grafos, la noción de puntos cluster/superPixels/blobs y el centro de masa como representante, dado que se puede obtener de forma simple mediante los "image moments". Además, distintos niveles de image moments permiten obtener información adicional útil en la descripción del cluster.

\begin{enumerate}
    \item Se generan clusters, tambi\'en llamados {\it super pixels} mediante una agrupaci\'on en base a un kernel de tama\~no 3x3, que busca separar de forma local los pixels que corresponden a {\it background} y no aportan informaci\'on, con respecto a los que son parte de la c\'elula observada ({\it foreground}), siendo estos \'ultimos los que concentran el inter\'es para el an\'alisis. La creaci\'on de clusters permite establecer la primera informaci\'on de vecindarios.
    
    \item Cada cluster es representado por un nodo, ubicado en el centro de masa del {\it super pixel}. En conjunto con el centro de masa es posible obtener informaci\'on geom\'etrica mediante los {\it raw image moments}\cite{chaumette2004image} del cluster. En este punto tambi\'en se procede a realizar fusiones de clusters en base a 2 criterios: Aquellos clusters con un n\'umero de p\'ixeles inferior a un umbral definido por el par\'ametro {\it Max\_Thickness} y los clusters que s\'olo tengan 2 vecinos y se encuentren bajo un umbral de cercan\'ia definido por el par\'ametro {\it Connectivity\_Threshold}. El par\'ametro {\it Max\_Thickness} hace referencia al ancho promedio de un filamento en la imagen y es definido por el usuario, mientras que {\it Connectivity\_Threshold} es el resultado del m\'ultiplo entre {\it Max\_Thickness} y un factor que depende de la c\'elula observada, variando entre 0.4 y 0.5. Una de las ventajas de fusionar clusters bajo los criterios mencionados radica en identificar y eliminar ciclos triangulares entre vecinos.% mejorando la informaci\'on de vecindarios, sirviendo como una heurística para limitar el n\'umero de nodos.
    
    \item Para asociar los superpixeles con los nodos del grafo se realiza un procedimiento similar al del paso 2, donde los nodos que representan clusters son fusionados con los nodo del grafo. Se utiliza la posici\'on del nodo en el grafo como centro de una matrix de tama\~no 3x3, la que es recorrida para obtener los clusters a los que pertenece cada p\'ixel en la matriz. Luego, Los clusters encontrados son absorbidos por el nodo del grafo, el que representa un nuevo superpixel que reemplaza a los que absorbe, heredando los vecinos que estos ten\'ian y manteniendo la posici\'on del nodo del grafo.
    
    %\item A partir de la informaci\'on de vecindario de los nodos definitivos obtenidos en el paso anterior, se generan aristas entre nodos vecinos. Se obtiene el largo e  informaci\'on angular para cada arista creada. %Esta \'ultima es utilizada m\'as adelante para definir puntos de partida de las hormigas.
\end{enumerate}


%Se define como generador {\it aproximado} de grafos debido a que puede sufrir de peque\~nas desviaciones en la ubicaci\'on de los nodos y las aristas con respecto a lo que otras herramientas de esqueletonizaci\'on e identificaci\'on de intersecciones en conjunto pueden hacer en la misma tarea. Uno de los objetivos en la creaci\'on del generador {\it aproximado} de grafos se debe a que facilita el uso de im\'agenes encontradas en el estado del arte.

%En el caso que no sea posible obtener grafo mediante la esqueletonizaci\'on de la imagen, esta herramienta considera un paso adicional al procedimiento de 2 pasos presentado previamente. El tercer paso consiste en generar aristas entre los nodos vecinos, en base a la informaci\'on de vecindario, obteniendo el largo e informaci\'on angular para cada arista creada. El grafo generado se denomina como un grafo aproximado, ya que puede presentar deformaciones.


\section{Resultados Algoritmo Phil en Im\'agenes Sint\'eticas}

\begin{table}[h]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
        Semilla & VI & TP & FP &TN &FN & Rand	& Jaccard &	Precision &	Recall &	F1 \\ \hline 
        0    & 2.0445 & 13 & 13 & 139 & 45 & 0.7238 & 0.1830 & 0.5 & 0.2241 & 0.3095\\
        10   & 1.5454 & 10 & 10 & 94  & 22 & 0.7647 & 0.2380 & 0.5 & 0.3125 & 0.3846\\
        1271 & 1 & 8  & 6  & 58  & 6  & 0.8461 & 0.4 & 0.5714 & 0.5714 & 0.5714\\
        3389 & 1.5454 & 10 & 10 & 94  & 22 & 0.7647 & 0.2380 & 0.5 & 0.3125 & 0.3846\\
        6821 & 2.0445 & 13 & 13 & 139 & 45 & 0.7238 & 0.1830 & 0.5  & 0.2241 & 0.3095\\
        \hline
    \end{tabular}
    \caption{Resultados de 5 iteraciones de Phil para individualizar filamentos en la figura \ref{fig:synth-QFS-7}. El valor m\'aximo de VI en este caso es de 2.397895, ya que el tama\~no del {\it data set} es de 29 aristas. El n\'umero de filamentos en el {\it ground truth} es 6.}
    \label{tab:Synth-QuantitativeIFS-Fig7DetailedResults1}
\end{table}
\addtocounter{table}{-1}
\begin{table}[h]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|}
    \hline
         & \multirow{4}{2cm}{\centering \% Cobertura de Aristas} & \multirow{4}{2cm}{Filamentos Propuestos} & \multirow{4}{2cm}{Filamentos Correctos} & \multirow{4}{2.5cm}{\% Correctos vs Propuestos} & \multirow{4}{2.5cm}{\centering \% Correctos vs {\it Ground Truth}} & \multirow{4}{1.2cm}{\centering Tiempo [seg]} \\
         &  &  &  & & &  \\
        Semilla &  &  &  & & &  \\
        &  &  &  & & &  \\ \hline 
        0 & 1 & 7 & 3 & 42.8571 & 50 & 0.3987\\
        10 & 1 & 6 & 3 & 50 & 50 & 0.3636\\
        1271 & 1 & 5 & 3 & 60 & 50 & 0.3135\\
        3389 & 1 & 6 & 3 & 50 & 50 & 0.3410\\
        6821 & 1 & 7 & 3 & 42.8571 & 50 & 0.3675\\
        \hline
    \end{tabular}
    \caption{Resultados ({\it Continuaci\'on}) de 5 iteraciones de Phil para individualizar filamentos en la figura \ref{fig:synth-QFS-7}. El n\'umero de filamentos en el {\it ground truth} es 6.}
    %\label{tab:Synth-QuantitativeIFS-Fig7DetailedResults2}
\end{table}


\begin{table}[h]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
        Semilla & VI & TP & FP &TN &FN & Rand	& Jaccard &	Precision &	Recall &	F1 \\ \hline 
        0   & 2.0422 & 26 & 41 & 227 & 57 & 0.7207 & 0.2096 & 0.3880 & 0.3132 & 0.3466 \\
        10 & 2.2500 & 17 & 34 & 218 & 56 & 0.7230 & 0.1588 & 0.3333 & 0.2328 & 0.2741\\
        1271 & 2.7267 & 28 & 51 & 327 & 90 & 0.7157 & 0.1656 & 0.3544 & 0.2372 & 0.2842\\
        3389 & 2.0422 & 26 & 41 & 227 & 57 & 0.7207 & 0.2096 & 0.3880 & 0.3132 & 0.3466\\
        6821 & 2.0210 & 17 & 33 & 203 & 47 & 0.7333 & 0.1752 & 0.34 & 0.2656 & 0.2982\\
        \hline
    \end{tabular}
    \caption{Resultados de 5 iteraciones de Phil para individualizar filamentos en la figura \ref{fig:synth-Define-1b}. El valor m\'aximo de VI en este caso es de 3.044522, ya que el tama\~no del {\it data set} es de 29 aristas. El n\'umero de filamentos en el {\it ground truth} es 5.}
    \label{tab:Synth-Define-1b-DetailedResults1}
\end{table}
\addtocounter{table}{-1}
\begin{table}[h]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|}
    \hline
         & \multirow{4}{2cm}{\centering \% Cobertura de Aristas} & \multirow{4}{2cm}{Filamentos Propuestos} & \multirow{4}{2cm}{Filamentos Correctos} & \multirow{4}{2.5cm}{\% Correctos vs Propuestos} & \multirow{4}{2.5cm}{\centering \% Correctos vs {\it Ground Truth}} & \multirow{4}{1.2cm}{\centering Tiempo [seg]} \\
         &  &  &  & & &  \\
        Semilla &  &  &  & & &  \\
        &  &  &  & & &  \\ \hline 
        0 & 1 & 9  & 3 & 33.3333 & 60 & 0.4432\\
        10 & 1 & 9  & 3 & 33.3333 & 60 & 0.5299\\
        1271 & 1 & 10 & 3 & 30 & 60 & 0.4795\\
        3389 & 1 & 9  & 3 & 33.3333 & 60 & 0.5276\\
        6821 & 1 & 9  & 3 & 33.3333 & 60 & 0.5554\\
        \hline
    \end{tabular}
    \caption{Resultados ({\it Continuaci\'on}) de 5 iteraciones de Phil para individualizar filamentos en la figura \ref{fig:synth-Define-1b}. El n\'umero de filamentos en el {\it ground truth} es 5.}
    %\label{tab:Synth-Define-1b-DetailedResults2}
\end{table}

\section{Resultados Algoritmo Phil en Im\'agenes Reales}

\begin{table}[h]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
        Semilla & VI & TP & FP &TN &FN & Rand	& Jaccard &	Precision &	Recall &	F1 \\ \hline 
        0    & 1.9079 & 43 & 54 & 853 & 85 & 0.8657 & 0.2362 & 0.4432 & 0.3359 & 0.3822 \\
        10   & 1.7392 & 43 & 51 & 818 & 78 & 0.8696 & 0.25 & 0.4574 & 0.3553 & 0.4 \\
        1271 & 2.0292 & 44 & 62 & 886 & 89 & 0.8603 & 0.2256 & 0.4150 & 0.3308 & 0.3682 \\
        3389 & 1.8376 & 43 & 54 & 815 & 78 & 0.8666 & 0.2457 & 0.4432 & 0.3553 & 0.3944 \\
        6821 & 1.8376 & 43 & 54 & 815 & 78 & 0.8666 & 0.2457 & 0.4432 & 0.3553 & 0.3944 \\
        \hline
    \end{tabular}
    \caption{Resultados de 5 iteraciones de Phil para individualizar filamentos en la figura \ref{fig:SpinningMarchantia}. El valor m\'aximo de VI en este caso es de 3.496508, ya que el tama\~no del {\it data set} es de 29 aristas. El n\'umero de filamentos en el {\it ground truth} es 12.}
    \label{tab:SpinningMarchantiaDetailedResults1}
\end{table}
\addtocounter{table}{-1}
\begin{table}[h]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|}
    \hline
         & \multirow{4}{2cm}{\centering \% Cobertura de Aristas} & \multirow{4}{2cm}{Filamentos Propuestos} & \multirow{4}{2cm}{Filamentos Correctos} & \multirow{4}{2.5cm}{\% Correctos vs Propuestos} & \multirow{4}{2.5cm}{\centering \% Correctos vs {\it Ground Truth}} & \multirow{4}{1.2cm}{\centering Tiempo [seg]} \\
         &  &  &  & & &  \\
        Semilla &  &  &  & & &  \\
        &  &  &  & & &  \\ \hline 
        0 & 1 & 13 & 8 & 61.5384 & 66.6667 & 0.7281  \\
        10 & 1 & 13 & 7 & 53.8461 & 58.3333 & 0.7334\\
        1271 & 1 & 12 & 7 & 58.3333 & 58.3333 & 0.6870\\
        3389 & 1 & 12 & 7 & 58.3333 & 58.3333 & 0.6677\\
        6821 & 1 & 12 & 7 & 58.3333 & 58.3333 & 0.6558\\
        \hline
    \end{tabular}
    \caption{Resultados ({\it Continuaci\'on}) de 5 iteraciones de Phil para individualizar filamentos en la figura \ref{fig:SpinningMarchantia}. El n\'umero de filamentos en el {\it ground truth} es 12.}
    %\label{tab:SpinningMarchantiaDetailedResults2}
\end{table}


\begin{table}[h]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
        Semilla & VI & TP & FP &TN &FN & Rand	& Jaccard &	Precision &	Recall &	F1 \\ \hline 
        0    & 2.0759 & 83  & 82  & 1624 & 164 & 0.8740  & 0.2522  & 0.5030  & 0.3360 & 0.4029 \\
        10   & 1.8889  & 91  & 81  & 1524 & 134 & 0.8825 & 0.2973 & 0.5290  & 0.4044 & 0.4584 \\
        1271 & 2.8895 & 107 & 113 & 2430 & 276 & 0.8670 & 0.2157 & 0.4863 & 0.2793 & 0.3548\\
        3389 & 2.1723 & 108 & 87  & 2022 & 258 & 0.8571 & 0.2332 & 0.5268 & 0.2950 & 0.3782\\
        6821 & 2.3675 & 91  & 84  & 1873 & 163 & 0.8882 & 0.2692 & 0.52     & 0.3582 & 0.4242\\
        \hline
    \end{tabular}
    \caption{Resultados de 5 iteraciones de Phil para individualizar filamentos en la figura \ref{fig:field3t0filtered1}. El valor m\'aximo de VI en este caso es de 3.7612, ya que el tama\~no del {\it data set} es de 29 aristas. El n\'umero de filamentos en el {\it ground truth} es 12.}
    \label{tab:field3t0filteredDetailedResults1}
\end{table}
\addtocounter{table}{-1}
\begin{table}[h]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|}
    \hline
         & \multirow{4}{2cm}{\centering \% Cobertura de Aristas} & \multirow{4}{2cm}{Filamentos Propuestos} & \multirow{4}{2cm}{Filamentos Correctos} & \multirow{4}{2.5cm}{\% Correctos vs Propuestos} & \multirow{4}{2.5cm}{\centering \% Correctos vs {\it Ground Truth}} & \multirow{4}{1.2cm}{\centering Tiempo [seg]} \\
         &  &  &  & & &  \\
        Semilla &  &  &  & & &  \\
        &  &  &  & & &  \\ \hline 
        0 & 1 & 15 & 7 & 46.6666 & 58.3333 & 0.9919  \\
        10 & 1 & 14 & 8 & 57.1428 & 66.6667 & 1.0342\\
        1271 & 1 & 16 & 8 & 50  & 66.6667 & 0.9953\\
        3389 & 1 & 15 & 8 & 53.3333 & 66.6667 & 0.9797\\
        6821 & 1 & 15 & 8 & 53.3333 & 66.6667 & 0.8456\\
        \hline
    \end{tabular}
    \caption{Resultados ({\it Continuaci\'on}) de 5 iteraciones de Phil para individualizar filamentos en la figura \ref{fig:field3t0filtered1}. El n\'umero de filamentos en el {\it ground truth} es 12.}
    %\label{tab:field3t0filtered1DetailedResults2}
\end{table}

\begin{table}[h]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|}
    \hline
        Semilla & VI & TP & FP &TN &FN & Rand	& Jaccard &	Precision &	Recall &	F1 \\ \hline 
        0    & 0.428571 & 2 & 1 & 23 & 2 & 0.892857 & 0.4 & 0.666667 & 0.5 & 0.5714 \\
        10   & 0.428571 & 2 & 1 & 23 & 2 & 0.892857 & 0.4 & 0.666667 & 0.5 & 0.5714 \\
        1271 & 0.428571 & 2 & 1 & 23 & 2 & 0.892857 & 0.4 & 0.666667 & 0.5 & 0.5714 \\
        3389 & 0.428571 & 2 & 1 & 23 & 2 & 0.892857 & 0.4 & 0.666667 & 0.5 & 0.5714 \\
        6821 & 0.428571 & 2 & 1 & 23 & 2 & 0.892857 & 0.4 & 0.666667 & 0.5 & 0.5714 \\
        \hline
    \end{tabular}
    \caption{Resultados de 5 iteraciones de Phil para individualizar filamentos en la figura \ref{fig:field3t0filtered2}. El valor m\'aximo de VI en este caso es de 1.94591, ya que el tama\~no del {\it data set} es de 29 aristas. El n\'umero de filamentos en el {\it ground truth} es 5.}
    \label{tab:field3t0filtered2DetailedResults1}
\end{table}
\addtocounter{table}{-1}
\begin{table}[h]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|}
    \hline
         & \multirow{4}{2cm}{\centering \% Cobertura de Aristas} & \multirow{4}{2cm}{Filamentos Propuestos} & \multirow{4}{2cm}{Filamentos Correctos} & \multirow{4}{2.5cm}{\% Correctos vs Propuestos} & \multirow{4}{2.5cm}{\centering \% Correctos vs {\it Ground Truth}} & \multirow{4}{1.2cm}{\centering Tiempo [seg]} \\
         &  &  &  & & &  \\
        Semilla &  &  &  & & &  \\
        &  &  &  & & &  \\ \hline 
        0 & 1 & 5 & 4 & 80 & 80 & 0.2872 \\
        10 & 1 & 5 & 4 & 80 & 80 & 0.2929\\
        1271 & 1 & 5 & 4 & 80 & 80 & 0.2882\\
        3389 & 1 & 5 & 4 & 80 & 80 & 0.2806\\
        6821 & 1 & 5 & 4 & 80 & 80 & 0.3080\\
        \hline
    \end{tabular}
    \caption{Resultados ({\it Continuaci\'on}) de 5 iteraciones de Phil para individualizar filamentos en la figura \ref{fig:field3t0filtered2}. El n\'umero de filamentos en el {\it ground truth} es 5.}
    %\label{tab:field3t0filtered2DetailedResults2}
\end{table}